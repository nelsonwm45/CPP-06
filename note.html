<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP Module 06 — C++ Casts • Pretty README</title>
<meta name="description" content="Modern, readable HTML README for 42 CPP Module 06: casts, ScalarConverter, Serializer, and RTTI identify." />
<style>
  /* ==== Design system ===================================================== */
  :root{
    --bg:#0f172a;           /* slate-900 */
    --bg-soft:#111827;      /* gray-900 */
    --panel:#0b1220;        /* deep navy for cards */
    --card:#0b1220;
    --txt:#e5e7eb;          /* gray-200 */
    --muted:#94a3b8;        /* slate-400 */
    --link:#60a5fa;         /* blue-400 */
    --accent:#4f8cff;       /* blueprint */
    --accent-2:#22c55e;     /* green */
    --accent-3:#f59e0b;     /* amber */
    --danger:#ef4444;       /* red-500 */
    --border:#1f2a44;
    --chip:#111d34;
    --shadow:0 20px 50px rgba(8,18,40,.35);
    --radius:18px;
    --radius-sm:12px;
    --code:#0b1220;
    --code-border:#17223a;
    --kbd:#101b31;
    --ring:0 0 0 3px rgba(79,140,255,.35);
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f8fc;
      --bg-soft:#eef2f8;
      --panel:#ffffff;
      --card:#ffffff;
      --txt:#1f2937;
      --muted:#64748b;
      --link:#2563eb;
      --border:#e6ecf2;
      --chip:#f1f5f9;
      --shadow:0 18px 40px rgba(20,32,60,.10);
      --code:#0b1220;
      --code-border:#e6ecf2;
      --kbd:#eef2f8;
    }
  }

  /* ==== Base =============================================================== */
  *{box-sizing:border-box}
  html{scroll-behavior:smooth}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    background: radial-gradient(1200px 600px at 20% -10%, rgba(79,140,255,.10), transparent 60%),
                radial-gradient(1000px 500px at 120% 0%, rgba(34,197,94,.08), transparent 60%),
                var(--bg);
    color:var(--txt);
    line-height:1.65;
  }
  a{color:var(--link); text-decoration:none}
  a:hover{text-decoration:underline}
  code, pre, kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
  .wrap{
	max-width: min(96vw, 1600px);
	margin: 0 auto;
	padding: 32px 20px 60px;

	display: grid;
	grid-template-columns: 280px 1fr; /* keep sidebar the same, grow content */
	gap: 28px;
  }

  /* ==== Sidebar / TOC ====================================================== */
  .toc{
    position: sticky;
    top:16px;
    align-self:start;
    background:linear-gradient(180deg, var(--panel), rgba(11,18,32,.8));
    border:1px solid var(--border);
    border-radius:var(--radius);
    padding:18px;
    box-shadow:var(--shadow);
  }
  .brand{
    display:flex; align-items:center; gap:12px; margin-bottom:14px;
  }
  .brand svg{width:28px; height:28px}
  .brand .title{font-weight:800; letter-spacing:.2px}
  .badge-row{display:flex; flex-wrap:wrap; gap:6px; margin:8px 0 14px}
  .badge{
    background:var(--chip); border:1px solid var(--border);
    padding:6px 10px; border-radius:999px; font-size:12px; color:var(--muted)
  }
  .toc h4{margin:14px 0 10px; font-size:13px; color:var(--muted); letter-spacing:.4px; text-transform:uppercase}
  .toc ul{list-style:none; margin:0; padding:0}
  .toc li{margin:6px 0}
  .toc a{display:block; padding:6px 8px; border-radius:8px}
  .toc a:hover{background:rgba(79,140,255,.12); text-decoration:none}

  /* ==== Main content ======================================================= */
  .content{
    background:linear-gradient(180deg, rgba(79,140,255,.07), transparent 22%),
               linear-gradient(180deg, var(--panel), var(--panel));
    border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow);
    overflow:hidden;
  }
  .header{
    padding:26px 26px 10px;
    border-bottom:1px solid var(--border);
    display:flex; justify-content:space-between; gap:12px; align-items:center;
  }
  .header h1{margin:0; font-size:24px; letter-spacing:.2px}
  .chips{display:flex; gap:8px; flex-wrap:wrap}
  .chip{background:var(--chip); border:1px solid var(--border); color:var(--muted); padding:6px 10px; border-radius:999px; font-size:12px}

  .section{padding:22px 26px; border-top:1px dashed var(--border)}
  .section:first-of-type{border-top:none}
  .section h2{display:flex; align-items:center; gap:10px; margin:0 0 12px}
  .section h3{margin:18px 0 8px; font-size:18px}
  .lead{color:var(--muted)}

  /* ==== Tables ============================================================= */
  .table{
    width:100%; border-collapse:separate; border-spacing:0; margin:12px 0; font-size:14px;
    overflow:hidden; border-radius:14px; border:1px solid var(--border);
  }
  .table thead th{
    text-align:left; background:rgba(79,140,255,.10); color:var(--txt); padding:10px 12px; font-weight:700;
  }
  .table td{padding:10px 12px; border-top:1px solid var(--border); color:var(--txt)}
  .table tr:nth-child(even) td{background:rgba(255,255,255,.02)}

  /* ==== Code blocks ======================================================== */
  pre{
    background:linear-gradient(180deg, rgba(255,255,255,.02), transparent 30%), var(--code);
    border:1px solid var(--code-border); border-radius:14px; padding:14px 14px;
    overflow:auto; position:relative; margin:12px 0;
  }
  .copy{
    position:absolute; top:8px; right:8px; font-size:12px; border:1px solid var(--border);
    background:var(--chip); color:var(--muted); border-radius:8px; padding:6px 8px; cursor:pointer;
  }
  kbd{
    background:var(--kbd); border:1px solid var(--border); border-bottom-color:#0006;
    padding:2px 6px; border-radius:6px; font-size:12px; box-shadow: inset 0 -2px 0 rgba(0,0,0,.2);
  }

  /* ==== Callouts =========================================================== */
  .callout{
    display:flex; gap:12px; align-items:flex-start; background:rgba(34,197,94,.08);
    border:1px solid rgba(34,197,94,.35); border-radius:14px; padding:12px 12px; margin:12px 0;
  }
  .callout.warn{background:rgba(245,158,11,.08); border-color:rgba(245,158,11,.35)}
  .callout.danger{background:rgba(239,68,68,.08); border-color:rgba(239,68,68,.35)}
  .callout .icon{flex:0 0 auto}
  .callout .body{color:var(--txt)}

  /* ==== Footer ============================================================= */
  .footer{padding:18px 26px; border-top:1px solid var(--border); color:var(--muted); font-size:13px}

  @media (max-width: 980px){
    .wrap{grid-template-columns:1fr}
    .toc{position:relative}
    .header{flex-direction:column; align-items:flex-start}
  }
</style>
</head>
<body>

<!-- SVG Icon Sprite -->
<svg style="display:none" xmlns="http://www.w3.org/2000/svg">
  <symbol id="ic-book" viewBox="0 0 24 24"><path fill="currentColor" d="M6 2h9a3 3 0 0 1 3 3v13.5a2.5 2.5 0 0 1-2.5 2.5H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2Zm0 2v15h9.5c.28 0 .5-.22.5-.5V5a1 1 0 0 0-1-1H6Zm2 3h7v2H8V7Zm0 4h7v2H8v-2Z"/></symbol>
  <symbol id="ic-cast" viewBox="0 0 24 24"><path fill="currentColor" d="M5 3h14a2 2 0 0 1 2 2v7h-2V5H5v1H3V5a2 2 0 0 1 2-2Zm-2 9h2a8 8 0 0 1 8 8v1H9a6 6 0 0 0-6-6v-3Zm0 5a3 3 0 0 1 3 3H3v-3Zm0-8h2a11 11 0 0 1 11 11v1H12A9 9 0 0 0 3 12Z"/></symbol>
  <symbol id="ic-bolt" viewBox="0 0 24 24"><path fill="currentColor" d="M13 2L3 14h7l-1 8 10-12h-7l1-8Z"/></symbol>
  <symbol id="ic-lab" viewBox="0 0 24 24"><path fill="currentColor" d="M9 2h6v2h-1v4.6l5.6 8.4A3 3 0 0 1 16.1 21H7.9a3 3 0 0 1-2.5-3.9L11 8.6V4H9V2Z"/></symbol>
  <symbol id="ic-pointer" viewBox="0 0 24 24"><path fill="currentColor" d="M3 3l8.5 18 1.8-6.9L21 12 3 3Z"/></symbol>
  <symbol id="ic-warning" viewBox="0 0 24 24"><path fill="currentColor" d="M1 21h22L12 2 1 21Zm12-3h-2v2h2v-2Zm0-8h-2v6h2V10Z"/></symbol>
  <symbol id="ic-check" viewBox="0 0 24 24"><path fill="currentColor" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></symbol>
  <symbol id="ic-code" viewBox="0 0 24 24"><path fill="currentColor" d="M9.4 16.6 5.8 13l3.6-3.6L8 8l-5 5 5 5 1.4-1.4ZM14.6 7.4 18.2 11l-3.6 3.6L16 16l5-5-5-5-1.4 1.4Z"/></symbol>
</svg>

<div class="wrap">
  <!-- Sidebar / TOC -->
  <aside class="toc" aria-label="Table of contents">
    <div class="brand">
      <svg><use href="#ic-book"/></svg>
      <div>
        <div class="title">CPP Module 06</div>
        <div class="muted" style="font-size:12px; color:var(--muted)">C++ Casts • C++98</div>
      </div>
    </div>
    <div class="badge-row">
      <span class="badge">-Wall -Wextra -Werror</span>
      <span class="badge">C++98</span>
      <span class="badge">No STL (pre-08)</span>
    </div>
    <h4>Navigate</h4>
    <ul>
      <li><a href="#module-06">Module 06</a></li>
      <li><a href="#casts">1) The 4 casts</a></li>
      <li><a href="#ex00">2) ex00 — ScalarConverter</a></li>
      <li><a href="#ex01">3) ex01 — Serializer</a></li>
      <li><a href="#ex02">4) ex02 — Identify real type</a></li>
      <li><a href="#skeletons">5) Program skeletons</a></li>
      <li><a href="#pitfalls">6) Typical pitfalls</a></li>
      <li><a href="#tests">7) Minimal test checklist</a></li>
    </ul>
  </aside>

  <!-- Main Content -->
  <main class="content" id="top" role="main">
    <section class="header">
      <h1>CPP Module 06 — C++ Casts</h1>
      <div class="chips">
        <span class="chip">Version 6.2</span>
        <span class="chip">Subject: Type conversions &amp; RTTI</span>
        <span class="chip">Exercises: ex00–ex02</span>
      </div>
    </section>

    <section class="section" id="Module 06">
      <h2><svg width="22" height="22"><use href="#ic-bolt"/></svg> Module 06</h2>
      <p class="lead">
        Theme: <strong>type conversions &amp; RTTI</strong> (Run-Time Type Info). Practice the 4 C++ casts, careful string→number conversions,
        safe pointer ↔ integer round-trips, and dynamic type identification.
      </p>
      <ul>
        <li>Tooling constraints: <code>-Wall -Wextra -Werror -std=c++98</code>, no STL containers/algorithms, no <code>printf/alloc/free</code>, no <code>using namespace</code>, no <code>typeinfo</code> (ex02), OCF unless otherwise noted.</li>
      </ul>
    </section>

    <section class="section" id="casts">
      <h2><svg width="22" height="22"><use href="#ic-cast"/></svg> 1) The 4 C++ casts — when &amp; why</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Cast</th><th>What it does</th><th>Typical use</th><th>Never use for</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>static_cast&lt;T&gt;(x)</code></td>
            <td>Compile-time checked conversions</td>
            <td>Numeric widen/narrow; <code>void*</code>→typed*; up/down casts you know are safe</td>
            <td>Cross-family pointer bit tricks</td>
          </tr>
          <tr>
            <td><code>dynamic_cast&lt;T&gt;(x)</code></td>
            <td>RTTI-checked downcast (needs virtual)</td>
            <td><code>Base*</code>/<code>Base&amp;</code> → <code>Derived*</code>/<code>Derived&amp;</code> safely</td>
            <td>Non-polymorphic types; performance-critical hot loops</td>
          </tr>
          <tr>
            <td><code>const_cast&lt;T&gt;(x)</code></td>
            <td>Add/remove const/volatile</td>
            <td>Interop when API lacks <code>const</code></td>
            <td>Mutating truly const objects (UB)</td>
          </tr>
          <tr>
            <td><code>reinterpret_cast&lt;T&gt;(x)</code></td>
            <td>Bit-level reinterpretation</td>
            <td>Pointer ↔ <code>uintptr_t</code>, very low-level tricks</td>
            <td>Regular value conversions; object model violations</td>
          </tr>
        </tbody>
      </table>
      <div class="callout">
        <div class="icon"><svg width="20" height="20"><use href="#ic-check"/></svg></div>
        <div class="body"><strong>Golden rule:</strong> prefer <code>static_cast</code>; use <code>dynamic_cast</code> for safe downcasts; keep <code>reinterpret_cast</code> as the last resort.</div>
      </div>
    </section>

    <section class="section" id="ex00">
      <h2><svg width="22" height="22"><use href="#ic-lab"/></svg> 2) ex00 — ScalarConverter</h2>
      <h3>Goal</h3>
      <p>Parse <em>one</em> CLI literal and print it as <strong>char, int, float, double</strong> with exact formatting and graceful “impossible / Non displayable”.</p>

      <h3>Inputs you must handle</h3>
      <ul>
        <li><strong>char</strong>: <code>a</code>, <code>Z</code> (argv usually gives just the character)</li>
        <li><strong>int</strong>: <code>0</code>, <code>-42</code>, <code>42</code></li>
        <li><strong>float</strong>: <code>4.2f</code>, <code>-inff</code>, <code>+inff</code>, <code>nanf</code></li>
        <li><strong>double</strong>: <code>4.2</code>, <code>-inf</code>, <code>+inf</code>, <code>nan</code></li>
      </ul>

      <h3>Design tips</h3>
<pre><button class="copy" data-target="c1">Copy</button><code id="c1">class ScalarConverter {
public:
  static void convert(const std::string&amp; s);
private:
  ScalarConverter();
  ScalarConverter(const ScalarConverter&amp;);
  ScalarConverter&amp; operator=(const ScalarConverter&amp;);
  ~ScalarConverter();
};</code></pre>

      <ol>
        <li><strong>Classify</strong> the input (char / int / float / double / pseudo-literal).</li>
        <li><strong>Parse</strong> to its native type (<code>strtol/strtod</code> + range checks).</li>
        <li><strong>Convert</strong> via <code>static_cast</code> to the others.</li>
        <li><strong>Print</strong> with exact formatting.</li>
      </ol>

      <h3>Classification heuristics</h3>
      <ul>
        <li>Trim optional leading <code>+</code>/<code>-</code>; count dots and trailing <code>f</code>.</li>
        <li>Float pseudos: <code>nanf</code>, <code>+inff</code>, <code>-inff</code>; Double pseudos: <code>nan</code>, <code>+inf</code>, <code>-inf</code>.</li>
        <li>Single printable non-digit → <strong>char</strong>.</li>
        <li><code>[-+]?</code> + digits only → <strong>int</strong>.</li>
        <li>Has dot + ends with <code>f</code> → <strong>float</strong>; dot without <code>f</code> → <strong>double</strong>.</li>
      </ul>

      <h3>Parsing &amp; printing helpers</h3>
<pre><button class="copy" data-target="c2">Copy</button><code id="c2">static bool isIntOverflow(double x){
  return x &lt; static_cast&lt;double&gt;(INT_MIN) || x &gt; static_cast&lt;double&gt;(INT_MAX);
}
static bool isDisplayable(char c){ return c &gt;= 32 &amp;&amp; c &lt;= 126; }

static void printFloat(double x){
  std::cout.setf(std::ios::fixed);
  std::cout &lt;&lt; "float: " &lt;&lt; std::setprecision(1) &lt;&lt; static_cast&lt;float&gt;(x) &lt;&lt; "f\n";
}
static void printDouble(double x){
  std::cout.setf(std::ios::fixed);
  std::cout &lt;&lt; "double: " &lt;&lt; std::setprecision(1) &lt;&lt; x &lt;&lt; "\n";
}</code></pre>

      <h3>Edge cases to test</h3>
      <ul>
        <li>Pseudos: <code>nan</code>/<code>nanf</code>, <code>+/-inf</code>/<code>+/-inff</code></li>
        <li>Overflow: <code>2147483648</code> → <code>int: impossible</code></li>
        <li>Non-displayable char after numeric cast</li>
        <li>Forms like <code>+0</code>, <code>-0.0</code>, <code>.5f</code> (you may reject uncommon forms)</li>
      </ul>
    </section>

    <section class="section" id="ex01">
      <h2><svg width="22" height="22"><use href="#ic-pointer"/></svg> 3) ex01 — Serializer</h2>
      <p>Convert a pointer to <code>uintptr_t</code> and back with <code>reinterpret_cast</code>.</p>
<pre><button class="copy" data-target="c3">Copy</button><code id="c3">struct Data {
  std::string name;   // allowed (not a container)
  int         score;
};

class Serializer {
public:
  static uintptr_t serialize(Data* ptr);
  static Data*     deserialize(uintptr_t raw);
private:
  Serializer(); Serializer(const Serializer&amp;);
  Serializer&amp; operator=(const Serializer&amp;);
  ~Serializer();
};

uintptr_t Serializer::serialize(Data* ptr){
  return reinterpret_cast&lt;uintptr_t&gt;(ptr);
}
Data* Serializer::deserialize(uintptr_t raw){
  return reinterpret_cast&lt;Data*&gt;(raw);
}</code></pre>

      <div class="callout warn">
        <div class="icon"><svg width="20" height="20"><use href="#ic-warning"/></svg></div>
        <div class="body"><strong>Note:</strong> This is not cloning; it’s just reinterpreting bits. Don’t dereference after the original object is gone.</div>
      </div>
    </section>

    <section class="section" id="ex02">
      <h2><svg width="22" height="22"><use href="#ic-code"/></svg> 4) ex02 — Identify real type (no <code>&lt;typeinfo&gt;</code>)</h2>
      <p>Polymorphic base, three derived types, random <code>generate()</code>, and <code>identify()</code> via <code>dynamic_cast</code>.</p>

<pre><button class="copy" data-target="c4">Copy</button><code id="c4">class Base { public: virtual ~Base() {} };
class A : public Base {};
class B : public Base {};
class C : public Base {};

Base* generate(){
  std::srand(static_cast&lt;unsigned&gt;(std::time(0)));
  int r = std::rand() % 3;
  if (r == 0) return new A;
  if (r == 1) return new B;
  return new C;
}

void identify(Base* p){
  if (dynamic_cast&lt;A*&gt;(p)) std::cout &lt;&lt; "A\n";
  else if (dynamic_cast&lt;B*&gt;(p)) std::cout &lt;&lt; "B\n";
  else if (dynamic_cast&lt;C*&gt;(p)) std::cout &lt;&lt; "C\n";
  else std::cout &lt;&lt; "Unknown\n";
}

void identify(Base&amp; p){
  try { (void)dynamic_cast&lt;A&amp;&gt;(p); std::cout &lt;&lt; "A\n"; return; } catch (...) {}
  try { (void)dynamic_cast&lt;B&amp;&gt;(p); std::cout &lt;&lt; "B\n"; return; } catch (...) {}
  try { (void)dynamic_cast&lt;C&amp;&gt;(p); std::cout &lt;&lt; "C\n"; return; } catch (...) {}
  std::cout &lt;&lt; "Unknown\n";
}</code></pre>

      <div class="callout">
        <div class="icon"><svg width="20" height="20"><use href="#ic-check"/></svg></div>
        <div class="body"><strong>Why it works:</strong> <code>Base</code> is polymorphic thanks to the virtual destructor, so RTTI is available at runtime.</div>
      </div>
    </section>

    <section class="section" id="skeletons">
      <h2><svg width="22" height="22"><use href="#ic-book"/></svg> 5) Formatting &amp; program skeletons</h2>
      <h3>ex00 <code>main.cpp</code></h3>
<pre><button class="copy" data-target="c5">Copy</button><code id="c5">int main(int argc, char** argv){
  if (argc != 2){
    std::cerr &lt;&lt; "Usage: ./convert &lt;literal&gt;\n";
    return 1;
  }
  ScalarConverter::convert(argv[1]);
  return 0;
}</code></pre>

      <h3>ex01 <code>main.cpp</code></h3>
<pre><button class="copy" data-target="c6">Copy</button><code id="c6">int main(){
  Data d; d.name = "Alice"; d.score = 99;
  Data* p = &d;
  uintptr_t raw = Serializer::serialize(p);
  Data* q = Serializer::deserialize(raw);
  std::cout &lt;&lt; "p: " &lt;&lt; p &lt;&lt; " q: " &lt;&lt; q &lt;&lt; "\n";
  std::cout &lt;&lt; "Equal: " &lt;&lt; (p == q) &lt;&lt; "\n";
  std::cout &lt;&lt; q-&gt;name &lt;&lt; " " &lt;&lt; q-&gt;score &lt;&lt; "\n";
}</code></pre>

      <h3>ex02 <code>main.cpp</code></h3>
<pre><button class="copy" data-target="c7">Copy</button><code id="c7">int main(){
  Base* b = generate();
  identify(b);
  identify(*b);
  delete b;
}</code></pre>
    </section>

    <section class="section" id="pitfalls">
      <h2><svg width="22" height="22"><use href="#ic-warning"/></svg> 6) Typical pitfalls (and how to avoid them)</h2>
      <ul>
        <li><strong>OCF:</strong> keep Orthodox Canonical Form where required (ex02 is explicitly exempt).</li>
        <li><strong>ex00 formatting:</strong> always show one decimal for integral floats/doubles (<code>x.0f</code>/<code>x.0</code>). Exact strings: <code>impossible</code>, <code>Non displayable</code>, <code>nanf</code>, <code>nan</code>, <code>+inff</code>, <code>-inff</code>, <code>+inf</code>, <code>-inf</code>.</li>
        <li><strong>Overflow checks:</strong> verify ranges before casting down to <code>int</code> or <code>char</code>.</li>
        <li><strong>Locale:</strong> don’t rely on commas; stick with dot decimal.</li>
        <li><strong><code>reinterpret_cast</code> misuse:</strong> only pointer↔<code>uintptr_t</code> as requested.</li>
        <li><strong><code>dynamic_cast</code> needs virtual:</strong> ensure <code>Base</code> has a virtual destructor.</li>
        <li><strong>Random seeding:</strong> seed once; if calling <code>generate()</code> often, move <code>srand()</code> to <code>main()</code>.</li>
      </ul>
    </section>

    <section class="section" id="tests">
      <h2><svg width="22" height="22"><use href="#ic-check"/></svg> 7) Minimal test checklist</h2>
      <h3>ex00</h3>
      <ul>
        <li><code>./convert 0</code>, <code>./convert 42</code>, <code>./convert -42</code></li>
        <li><code>./convert 42.0f</code>, <code>./convert -4.2f</code></li>
        <li><code>./convert 42.0</code>, <code>./convert -4.2</code></li>
        <li><code>./convert nan</code>, <code>nanf</code>, <code>+inf</code>, <code>-inff</code></li>
        <li><code>./convert a</code> (single printable char)</li>
        <li><code>./convert 2147483648</code> → <code>int: impossible</code></li>
      </ul>
      <h3>ex01</h3>
      <ul><li>Multiple <code>Data</code> instances; ensure pointer equality and fields intact after round-trip.</li></ul>
      <h3>ex02</h3>
      <ul><li>Loop <code>generate()</code> (e.g., 10x) and verify variety and correct identification for A/B/C.</li></ul>
    </section>

    <section class="footer">
      Made with ❤️ for 42’s CPP Module 06. Dark/light aware, copy-buttons included.
    </section>
  </main>
</div>

<script>
  // Copy buttons for code blocks
  document.querySelectorAll('.copy').forEach(btn=>{
    btn.addEventListener('click', async ()=>{
      const id = btn.getAttribute('data-target');
      const el = document.getElementById(id);
      if(!el) return;
      try{
        await navigator.clipboard.writeText(el.innerText);
        const old = btn.textContent;
        btn.textContent = 'Copied!';
        btn.style.boxShadow = 'var(--ring)';
        setTimeout(()=>{ btn.textContent = old; btn.style.boxShadow='none'; }, 1300);
      }catch(e){
        btn.textContent = 'Copy failed';
      }
    });
  });
</script>
</body>
</html>
